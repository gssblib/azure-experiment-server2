<div>
  <p>
    This report shows the items which have not been checked out since the
    given date.
  </p>
  <gsl-multi-field-search-bar
    [criteria]="criteria" [fields]="searchFields" (search)="navigate()">
  </gsl-multi-field-search-bar>
  <div *ngIf="data.length > 0">
    Items found: <b>{{ data.length }}</b>
    <div class="download">
      <button mat-raised-button color="primary" (click)="downloadCsv()">Download CSV</button>
    </div>
  </div>
  <div class="container mat-elevation-z8">
    <div *ngIf="loading" class="spinner">
      <mat-spinner></mat-spinner>
    </div>
    <mat-table #table [dataSource]="dataSource"
               matSort matSortActive="fee" matSortDisableClear matSortDirection="desc">
      <ng-container matColumnDef="barcode">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Barcode</mat-header-cell>
        <mat-cell *matCellDef="let row">
          <a [routerLink]="['/items', row.barcode, 'details']">{{ row.barcode }}</a>
        </mat-cell>
      </ng-container>
      <ng-container matColumnDef="title">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Title</mat-header-cell>
        <mat-cell *matCellDef="let row">
          <a [routerLink]="['/items', row.barcode, 'details']">{{ row.title }}</a>
        </mat-cell>
      </ng-container>
      <ng-container matColumnDef="author">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Author</mat-header-cell>
        <mat-cell *matCellDef="let row">
          <a routerLink="/items" [queryParams]="{author: row.author}">{{row.author}}</a>
        </mat-cell>
      </ng-container>
      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    </mat-table>
    <mat-paginator [length]="count" [pageSize]="10">
    </mat-paginator>
  </div>
</div>
